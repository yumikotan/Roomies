<!doctype html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <title>Roomies</title>
 <link rel="stylesheet" href="./styles.css" />
</head>
<body>
 <div class="container">
   <div class="wave1"></div>
   <div class="wave2"></div>


   <div id="household-modal" class="modal hidden">
     <div class="modal-inner card">
       <button id="btn-close-household-modal" class="btn btn-text small">x</button>
       <h2 id="household-modal-title" style="margin-bottom:12px;"> Create Household</h2>


       <form id="form-create-household-name" class="form">
         <div class="field">
           <label for="modal-household-name"> Household name</label>
           <input type="text" id="modal-household-name" placeholder="Swig Roomies" required />
         </div>


         <div class="field">
           <label for="modal-household-description">Description</label>
           <textarea id="modal-household-description" rows="3" placeholder="household description" ></textarea>
         </div>


         <button type="submit" class="btn full-width" style="margin-top: 12px;"> Create Household </button>
       </form> 


       <form id="form-join-household" class="form hidden">
         <div class="field">
           <label for="modal-join-code">Invite code</label>
           <input type="text" id="modal-join-code" placeholder="ABC123" required />
         </div>


         <button type="submit" class="btn full-width" style="margin-top:12px;"> Join Household </button>
       </form>
     </div>
   </div>


   <div id="compat-modal" class="modal hidden">
     <div class="modal-inner card">
       <button id="btn-close-compat-modal" class="modal-close">
         X
       </button>


       <h2 style="text-align:center;margin-bottom:18px; color: #295e2b;">
         Find a Roommate
       </h2>


       <button id="btn-compat-with-person" class="btn full-width" style="margin-bottom:12px; background: #6fa573; color: white; box-shadow: none;">
         See if you're compatible with a potential roommate!
       </button>


       <button id="btn-compat-auto-match" class="btn ghost full-width" style="background: transparent; color: #6fa573; border: 2px solid #6fa573;">
         Match with potential roommates!
       </button>
     </div>
   </div>


   <section id="view-login" class="view no-banner">
     <div class="brand center">
       <div class="brand-logo">
         <img src="./img/otter.png" alt="Roomies Otter" />
       </div>
       <h1 class="big">Welcome to<br/>Roomies!</h1>
     </div>
     <div style="margin-top:24px;">
       <label>
         <span> School Email</span>
         <input id="login-email" type="email" placeholder="asmith@scu.edu" />
       </label>
       <label>
         <span>Password</span>
         <input id="login-password" type="password" placeholder="••••••••" />
       </label>
       <div style="margin-top:22px; display:grid; gap:14px;">
        <button id="btn-login" class="btn"> Log in</button>
        <div class="auth-links" style="margin-top:4px;">
         <a href="#" id="btn-forgot">Forgot password?</a>
       </div>
       <button id="btn-create-account" class="btn ghost">Create Account</button>
       </div>
       <p class="footer">ROOMIES</p>
     </div>
   </section>
 
   <section id="view-verify" class="view hidden no-banner">
     <div class="brand center">
       <div class="brand-logo">
         <img src="./img/otter.png" alt="Roomies Otter" />
       </div>
       <h1 class="big">Become a Roomie!</h1>
     </div>
     <p style="margin-top:16px;max-width:52ch;line-height:1.5;">
       At Roomies, we care about your safety! That’s why we verify every user’s school email,
       so you can be confident you’re connecting with real college students.
     </p>
     <div style="margin-top:8px;">
       <label>
         <span>School Email</span>
         <input id="verify-email" type="email" placeholder="asmith@scu.edu"/>
       </label>
       <label>
         <span>Choose Password</span>
         <input id="verify-password" type="password" placeholder="••••••••"/>
       </label>
       <div style="margin-top:14px; display:grid; gap:12px;">
         <button id="btn-verify" class="btn">Verify</button>
         <button id="btn-go-back-from-verify" class="btn ghost">Go back</button>
       </div>
     </div>
     <p class="footer">ROOMIES</p>
   </section>


   <section id="view-inuse" class="view hidden no-banner">
     <div class="brand center">
       <div class="brand-logo"><img src="./img/otter.png" alt="Roomies Otter" /></div>
       <h1 class="big">Uh Oh…</h1>
     </div>
     <p style="margin-top:10px;color:#db6262;font-weight:700;">
       This email is associated with an active account.
     </p>
     <p id="inuse-email" style="margin-top:24px;opacity:.95;"></p>
     <div style="height:1px;background:rgba(255,255,255,.6);margin-top:8px;"></div>
     <div style="margin-top:18px; display:grid; gap:12px;">
       <button id="btn-inuse-verify" class="btn">Verify</button>
       <button id="btn-go-back-from-inuse" class="btn ghost">Go back</button>
     </div>
     <p class="footer">ROOMIES</p>
   </section>


  <section id="view-dashboard" class="view hidden has-banner">
   <header class="dash-title">
     My Dashboard
   </header>


   <section class="card household-shell" style="background: #6fa573; padding: 20px; border-radius: 20px;">
     <h2 class="dash" style="color: white; font-weight: 800; text-align: center; margin-bottom: 12px;">Household</h2>
    
     <div id="household-empty">
       <div class="card" style="margin-top:0; padding: 18px; border-radius: 16px; background: white; text-align: center;">
         <p class="small" style="color: #333; margin: 0;">No household yet</p>
         <div style="margin-top:16px; display:grid; gap:10px;">
           <button id="btn-add-household" class="btn" style="background: #6fa573; color: white;">
             Create a Household
           </button>
           <button id="btn-open-join-household" class="btn ghost" style="background: transparent; color: #6fa573; border: 2px solid #6fa573;">
             Join a Household
           </button>
         </div>
       </div>
     </div>


     <div id="household-details" class="hidden" style="margin-top:16px;">
       <h3 id="household-name"></h3>
       <p id="household-description" class="subtitle"></p>
       <div class="members-block" style="margin-top:12px;">
         <h4>Members</h4>
         <ul id="household-members" class="member-list"></ul>
       </div>
       <div class="invite-block" style="margin-top:12px;">
         <h4>Invite code</h4>
         <div class="invite-code-row">
           <span id="household-invite" class="code-pill">---</span>
           <button id="btn-copy-invite" class="btn btn-text small">
             Copy
           </button>
         </div>
       </div>
     </div>
   </section>


   <section class="card FindRoommate-box" style="margin-top:24px; padding: 20px; border-radius: 20px; background: white;">
     <h2 class="FindRoommate-title" style="color: #295e2b; font-weight: 800; text-align: center;">Find a Roommate</h2> 
    
     <button
       id="btn-open-compat-modal"
       class="btn"
       style="margin-top:16px; background: #6fa573; color: white;"
       >
        Take a Compatibility Test
     </button>
    
     <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px;">
       <button id="btn-compat-requests" class="btn ghost small" style="padding: 10px 6px; background: #6fa573; color: white; border: none; font-size: 0.9rem;">
         Compatibility Test Requests <span class="badge" style="background: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 0.7rem; font-weight: 700;">1</span>
       </button>
       <button id="btn-compat-matches" class="btn ghost small" style="padding: 10px 6px; background: #6fa573; color: white; border: none; font-size: 0.9rem;">
         Compatibility Test Matches
       </button>
     </div>
   </section>


   <p class="footer">ROOMIES</p>
 </section>


 <section id="view-chores" class="view hidden has-banner">
   <header class="dash-title full-bleed">Chores</header>
   <section class="card" style="margin-top:24px;">
     <p class="subtitle">Shared tasks, schedules, and progress</p>
   </section>
   <p class="footer">ROOMIES</p>
 </section>


 <section id="view-expenses" class="view hidden has-banner">
   <header class="dash-title">Expenses</header>
   <section class="card" style="margin-top:24px;">
     <p class="subtitle">Track shared bills, and payments here.</p>
   </section>
   <p class="footer">ROOMIES</p>
 </section> 


 <section id="view-tips" class="view hidden has-banner">
   <header class="dash-title">Tips</header>
   <section class="card" style="margin-top:24px;">
     <p class="subtitle">Tips tab</p>
   </section>
   <p class="footer">ROOMIES</p>
 </section>  


 <section id="view-settings" class="view hidden ">
   <header class="dash-title">Settings</header>
   <section class="card" style="margin-top:24px;">
     <p class="subtitle" id="settings-user-info">Account settings and Profile</p>
     <button id="btn-logout" class="btn" style="margin-top:12px;">Log out</button>
   </section>
   <p class="footer">ROOMIES</p>
 </section> 


 <!-- STATUS BLOCK -->
 <section id="settings-status-block" class="hidden">


   <h3 style="margin-top:10px;">Your Status</h3>


   <label>
     <span>Your current status</span>
     <select id="settings-status-dropdown">
       <option value="available">Available</option>
       <option value="dnd">Do Not Disturb</option>
       <option value="custom">Custom…</option>
     </select>
   </label>


   <!-- Custom status input -->
   <label id="settings-custom-label" style="display:none; margin-top:8px;">
     <span>Custom Status</span>
     <input
       id="settings-status-custom"
       type="text"
       placeholder="Enter custom status"
     />
   </label>


   <label style="margin-top:10px; display:block;">
     <span>Profile picture URL (optional)</span>
     <input
       id="settings-icon-url"
       type="url"
       placeholder="https://img..."
     />
   </label>


   <button id="btn-save-status" class="btn small" style="margin-top:10px;">
     Save Status
   </button>


 </section>


 <nav class="bottom-nav">
   <button id="nav-dashboard" class="nav-btn" aria-label="Home">
     <img src="./img/icon-home.svg" alt="Home" />
   </button>
   <button id="nav-chores" class="nav-btn" aria-label="Chores">
     <img src="./img/icon-chores.svg" alt="Chores" />
   </button>
   <button id="nav-expenses" class="nav-btn" aria-label="Expenses">
     <img src="./img/icon-expenses.svg" alt="Expenses" />
   </button>
   <button id="nav-tips" class="nav-btn" aria-label="Tips">
     <img src="./img/icon-tips.svg" alt="Tips" />
   </button>
   <button id="nav-settings" class="nav-btn" aria-label="Settings">
     <img src="./img/icon-settings.svg" alt="Settings" />
   </button>
 </nav>
</div>


<script type="module" src="./firebaseClient.js"></script>
<script type="module" src="./auth.js"></script>
<script type="module" src="./app.js"></script>


<script>
 const views = Array.from(document.querySelectorAll(".view"));
 function showView(id) {
   views.forEach(v => v.classList.add("hidden"));
   const target = document.getElementById(id);
   if (target) target.classList.remove("hidden");
 }


  document.getElementById("nav-dashboard").addEventListener("click", () => showView("view-dashboard"));
 document.getElementById("nav-chores").addEventListener("click", () => showView("view-chores"));
 document.getElementById("nav-expenses").addEventListener("click", () => showView("view-expenses"));
 document.getElementById("nav-tips").addEventListener("click", () => showView("view-tips"));
 document.getElementById("nav-settings").addEventListener("click", () => showView("view-settings"));


 document.getElementById("btn-logout").addEventListener("click", () => {
   showView("view-login");
 });



 const compatModal = document.getElementById("compat-modal");
 const openCompatBtn = document.getElementById("btn-open-compat-modal");
 const closeCompatBtn = document.getElementById("btn-close-compat-modal"); 


 if (openCompatBtn) {
   openCompatBtn.addEventListener("click", () => {
     compatModal.classList.remove("hidden");
   });
 }


 if (closeCompatBtn) {
   closeCompatBtn.addEventListener("click", () => {
     compatModal.classList.add("hidden");
   });
 }


 document.getElementById("btn-compat-with-person").addEventListener("click", () => {
   compatModal.classList.add("hidden");
   alert("Redirect to roommate invite form or open invite modal.");
 });


 document.getElementById("btn-compat-auto-match").addEventListener("click", () => {
   compatModal.classList.add("hidden");
   alert("Redirect to start compatibility test.");
 }); 


 document.getElementById("btn-compat-requests").addEventListener("click", () => {
     alert("Display Compatibility Test Requests list.");
 });


 document.getElementById("btn-compat-matches").addEventListener("click", () => {
     alert("Display Compatibility Test Matches list.");
 });


 showView("view-login");


</script>
</body>
</html>

